{"version":3,"file":"index.js","sources":["../src/QuestionIcon.js","../src/FormBuilderField.js","../node_modules/style-inject/dist/style-inject.es.js","../src/FormBuilder.js","../src/defineAntdWidgets.js","../src/index.js"],"sourcesContent":["/* eslint react/self-closing-comp: 0 */\nimport React from 'react'\n\n// eslint-disable-next-line react/display-name\nconst QuestionIcon = () => (\n  <svg viewBox=\"0 0 1024 1024\" className=\"antd-form-builder-question-icon\">\n    <path d=\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z\"></path>\n    <path d=\"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7c0-19.7 12.4-37.7 30.9-44.8 59-22.7 97.1-74.7 97.1-132.5 0.1-39.3-17.1-76-48.3-103.3z\"></path>\n    <path d=\"M512 732m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z\"></path>\n  </svg>\n)\n\nexport default QuestionIcon\n","/* eslint react/prop-types: 0 */\nimport React, { forwardRef } from 'react'\nimport memoize from 'lodash/memoize'\nimport isArray from 'lodash/isArray'\nimport has from 'lodash/has'\nimport find from 'lodash/find'\nimport pick from 'lodash/pick'\nimport capitalize from 'lodash/capitalize'\nimport { Form, Tooltip, Input } from 'antd'\nimport QuestionIcon from './QuestionIcon'\nconst FormItem = Form.Item\n\nconst isV4 = !!Form.useForm\n\nconst getValue = (obj, namePath) => {\n  const arr = typeof namePath === 'string' ? namePath.split('.') : namePath\n  let current = obj\n\n  for (let i = 0; i < arr.length; i += 1) {\n    if (has(current, arr[i])) {\n      current = current[arr[i]]\n    } else {\n      return undefined\n    }\n  }\n\n  return current\n}\n\nconst getWrappedComponentWithForwardRef = memoize(Comp =>\n  // eslint-disable-next-line react/display-name\n  forwardRef((props, ref) => {\n    return (\n      <span ref={ref}>\n        <Comp {...props} />\n      </span>\n    )\n  }),\n)\n\nfunction FormBuilderField(props) {\n  const { field, meta, form } = props\n\n  const label = field.tooltip\n    ? <span>\n      {field.label}\n      <Tooltip title={field.tooltip}>\n        {' '}\n        <QuestionIcon />\n      </Tooltip>\n    </span>\n    : field.label\n\n  let formItemLayout =\n    field.formItemLayout || (field.label ? getValue(meta, 'formItemLayout') || [8, 16] : null)\n  if (isArray(formItemLayout) && formItemLayout.length >= 2) {\n    formItemLayout = {\n      labelCol: { span: formItemLayout[0] },\n      wrapperCol: { span: formItemLayout[1] },\n    }\n  }\n  const isFieldViewMode = meta.viewMode || field.viewMode || field.readOnly\n  const formItemProps = {\n    key: field.key,\n    colon: meta.colon,\n    ...(meta.formItemLayout !== null ? formItemLayout : {}),\n    label,\n    ...pick(field, [\n      'help',\n      'extra',\n      'labelCol',\n      'wrapperCol',\n      'colon',\n      'htmlFor',\n      'noStyle',\n      'validateStatus',\n      'hasFeedback',\n    ]),\n\n    ...field.formItemProps,\n    className: `${\n      meta.viewMode ? 'ant-form-item-view-mode' + (isV4 ? ' ant-form-item-view-mode-v4' : '') : ''\n    } ${field.className || (field.formItemProps && field.formItemProps.className)}`,\n  }\n  if (isV4) {\n    if (field.key || field.name) {\n      formItemProps.name = field.name || field.key.split('.')\n    }\n    Object.assign(formItemProps, {\n      noStyle: field.noFormItem || field.noStyle,\n      ...pick(field, ['shouldUpdate', 'dependencies']),\n    })\n  }\n\n  if (field.label && typeof field.label === 'string') {\n    formItemProps['data-label'] = field.label // help e2e test\n  }\n  if (field.colSpan && formItemProps.labelCol && !field.formItemLayout) {\n    const labelCol = Math.round(formItemProps.labelCol.span / field.colSpan)\n    Object.assign(formItemProps, {\n      labelCol: { span: labelCol },\n      wrapperCol: { span: 24 - labelCol },\n    })\n  }\n\n  if (field.render) {\n    return field.render.call(this, {\n      formItemProps,\n      field,\n      form,\n      ...pick(props, ['disabled', 'viewMode', 'initialValues']),\n    })\n  }\n\n  let initialValue\n  const initialValues = meta.initialValues || {}\n  if (has(field, 'initialValue')) {\n    initialValue = field.initialValue\n  } else if (field.getInitialValue) {\n    initialValue = field.getInitialValue(field, initialValues, form)\n  } else {\n    initialValue = getValue(initialValues, field.name || field.key)\n  }\n\n  // Handle field props\n  const rules = [...(field.rules || [])]\n  if (field.required) {\n    rules.unshift({ required: true, message: field.message || field.requiredMessage || undefined })\n  }\n  const fieldProps = {\n    initialValue,\n    preserve: meta.preserve,\n    ...pick(field, [\n      'getValueFromEvent',\n      'getValueProps',\n      'normalize',\n      'trigger',\n      'preserve',\n      'valuePropName',\n      'validateTrigger',\n      'validateFirst',\n    ]),\n    rules,\n    ...field.fieldProps,\n  }\n  if (isV4) {\n    Object.assign(formItemProps, fieldProps)\n  }\n\n  if (isFieldViewMode) {\n    let viewEle = null\n    const formValues = form ? (isV4 ? form.getFieldsValue(true) : form.getFieldsValue()) : {}\n    let viewValue = has(formValues, field.key || field.name.join('.'))\n      ? getValue(formValues, formItemProps.name || field.key)\n      : initialValue\n    if (field.renderView) {\n      viewEle = field.renderView(viewValue, form, initialValues)\n    } else if (field.viewWidget) {\n      const ViewWidget = field.viewWidget\n      viewEle = (\n        <ViewWidget value={viewValue} form={form} field={field} {...field.viewWidgetProps} />\n      )\n    } else if (field.link) {\n      const href = typeof field.link === 'string' ? field.link : viewValue\n      viewEle = (\n        <a href={href} target={field.linkTarget || '_self'}>\n          {viewValue}\n        </a>\n      )\n    } else if (field.options) {\n      // a little hacky here, if a field is select/options like, auto use label for value\n      const found = find(field.options, opt => opt[0] === viewValue)\n      if (found) {\n        viewValue = found[1]\n      }\n    }\n    if (!viewEle) {\n      if (typeof viewValue === 'boolean') viewEle = capitalize(String(viewValue))\n      else if (viewValue === undefined) viewEle = 'N/A'\n      else {\n        viewEle = (\n          <span className=\"antd-form-builder-string-content\">{String(viewValue) || ''}</span>\n        )\n      }\n    }\n\n    // TODO: readOnly seems to be the same with viewMode in antd v4\n    if (form && field.readOnly) {\n      const ele = <span className=\"antd-form-builder-read-only-content\">{viewEle}</span>\n      return (\n        <FormItem {...formItemProps}>\n          {isV4 ? ele : form.getFieldDecorator(field.id || field.key, fieldProps)(ele)}\n        </FormItem>\n      )\n    }\n    delete formItemProps.name\n    delete formItemProps.key\n    return <FormItem {...formItemProps}>{viewEle}</FormItem>\n  }\n\n  // Handle widget props\n  const wp = field.widgetProps || {}\n  const widgetProps = {\n    ...pick(field, ['placeholder', 'type', 'className', 'class', 'onChange']),\n    disabled: field.disabled || meta.disabled || props.disabled,\n    ...wp,\n  }\n\n  let FieldWidget = field.widget || Input\n\n  if (field.forwardRef) {\n    FieldWidget = getWrappedComponentWithForwardRef(FieldWidget)\n  }\n  const valueProps = {}\n  const ele = (\n    <FieldWidget {...widgetProps} {...valueProps}>\n      {field.children || null}\n    </FieldWidget>\n  )\n  const ele2 = isV4 ? ele : form.getFieldDecorator(field.id || field.key, fieldProps)(ele)\n\n  if (isV4) {\n    // antd v4 always has form item\n    return <FormItem {...formItemProps}>{ele}</FormItem>\n  }\n  return field.noFormItem || field.noStyle ? ele2 : <FormItem {...formItemProps}>{ele2}</FormItem>\n}\n\nexport default FormBuilderField\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","/* eslint react/no-multi-comp: 0 */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport isArray from 'lodash/isArray'\nimport find from 'lodash/find'\nimport { Col, Row } from 'antd'\nimport FormBuilderField from './FormBuilderField'\nimport './FormBuilder.css'\n\n// const isV4 = !!Form.useForm\n\nconst widgetMap = {}\n\nfunction getWidget(widget) {\n  if (!widget) return null\n  if (typeof widget === 'string') {\n    if (!widgetMap[widget] || !widgetMap[widget].widget) {\n      throw new Error(\n        `Widget '${widget}' not found, did you defined it by FormBuilder.defineComponent?`,\n      )\n    }\n    return widgetMap[widget].widget\n  }\n  return widget\n}\n\nfunction normalizeMeta(meta) {\n  let fields = isArray(meta) ? meta : meta.fields || meta.elements\n  if (!fields) fields = [meta]\n  fields = fields.map(field => {\n    const widget = getWidget(field.widget)\n    const viewWidget = getWidget(field.viewWidget)\n    const dynamic = field.dynamic !== false\n    // Find metaConvertor\n    const item = find(\n      Object.values(widgetMap),\n      entry => (entry.widget === widget || entry.widget === viewWidget) && entry.metaConvertor,\n    )\n    if (item) {\n      const newField = item.metaConvertor(field)\n      if (!newField) {\n        throw new Error(`metaConvertor of '${String(field.widget)}' must return a field`)\n      }\n      return { ...newField, viewWidget, widget, dynamic }\n    }\n    return { ...field, widget, viewWidget, dynamic }\n  })\n  if (isArray(meta) || (!meta.fields && !meta.elements)) {\n    return { fields }\n  }\n  return {\n    ...meta,\n    fields,\n  }\n}\n\nfunction FormBuilder(props) {\n  const { getMeta, form } = props\n  const meta = getMeta ? getMeta(form, props) : props.meta\n  return <FormBuilderInner {...props} form={form ? form.current || form : null} meta={meta} />\n  // return (\n  //   <Form.Item shouldUpdate noStyle>\n  //     {() => {\n  //       return <FormBuilderInner {...props} form={form ? form.current || form : null} meta={meta} />\n  //     }}\n  //   </Form.Item>\n  // )\n}\n\nfunction FormBuilderInner(props) {\n  const { meta, viewMode, initialValues, disabled = false, form = null } = props\n  if (!meta) return null\n\n  const newMeta = normalizeMeta(meta)\n  newMeta.viewMode = newMeta.viewMode || viewMode\n  newMeta.initialValues = newMeta.initialValues || initialValues\n  const { fields, columns = 1, gutter = 10 } = newMeta\n  const elements = fields.map(field => (\n    <FormBuilderField\n      key={field.key}\n      field={field}\n      disabled={disabled}\n      meta={newMeta}\n      form={form}\n    />\n  ))\n  if (columns === 1) {\n    return elements\n  }\n\n  const rows = []\n  // for each column , how many grid cols\n  const spanUnit = 24 / columns\n  // eslint-disable-next-line\n  for (let i = 0; i < elements.length; ) {\n    const cols = []\n    for (\n      let j = 0;\n      (j < columns || j === 0) && // total col span is less than columns\n      i < elements.length && // element exist\n      (!['left', 'both'].includes(fields[i].clear) || j === 0); // field doesn't need to start a new row\n\n    ) {\n      const fieldSpan = fields[i].colSpan || 1\n      cols.push(\n        <Col key={j} span={Math.min(24, spanUnit * fieldSpan)}>\n          {elements[i]}\n        </Col>,\n      )\n      j += fieldSpan\n      if (['both', 'right'].includes(fields[i].clear)) {\n        i += 1\n        break\n      }\n      i += 1\n    }\n    rows.push(\n      <Row key={i} gutter={gutter}>\n        {cols}\n      </Row>,\n    )\n  }\n  return rows\n}\n\nFormBuilder.defineWidget = (name, widget, metaConvertor = null) => {\n  if (widgetMap[name]) throw new Error(`Widget \"${name}\" already defined.`)\n  widgetMap[name] = {\n    widget,\n    metaConvertor,\n  }\n}\n\nFormBuilder.useForceUpdate = () => {\n  const [, updateState] = React.useState()\n  const forceUpdate = React.useCallback(() => updateState({}), [])\n  return forceUpdate\n}\n\nFormBuilder.useForm = f => {\n  throw new Error('FormBuilder.useForm is removed. Please use Form.useForm().')\n}\n\nFormBuilder.createForm = ctx => {\n  throw new Error(\n    'FormBuilder.createForm is removed. Please use Form.useForm for functional component and ref for class component.',\n  )\n}\nFormBuilder.propTypes = {\n  meta: PropTypes.any,\n}\n\nexport default FormBuilder\n","import React from 'react'\nimport FormBuilder from './FormBuilder'\nimport { Input, Checkbox, Switch, Button, Select, InputNumber, Radio, DatePicker } from 'antd'\nimport _ from 'lodash'\n\nconst mapOptions = options => {\n  if (!_.isArray(options)) {\n    throw new Error('Options should be array in form builder meta.')\n  }\n  return options.map(opt => {\n    if (_.isArray(opt)) {\n      return { value: opt[0], label: opt[1] }\n    } else if (_.isPlainObject(opt)) {\n      return opt\n    } else {\n      return { value: opt, label: opt }\n    }\n  })\n}\n\nFormBuilder.defineWidget('checkbox', Checkbox, field => {\n  return { ...field, valuePropName: 'checked' }\n})\n\nFormBuilder.defineWidget('switch', Switch, field => {\n  return { ...field, valuePropName: 'checked' }\n})\n\nFormBuilder.defineWidget('button', Button)\nFormBuilder.defineWidget('input', Input)\nFormBuilder.defineWidget('password', Input.Password)\nFormBuilder.defineWidget('textarea', Input.TextArea)\nFormBuilder.defineWidget('number', InputNumber)\nFormBuilder.defineWidget('date-picker', DatePicker)\nFormBuilder.defineWidget('radio', Radio)\nFormBuilder.defineWidget('radio-group', Radio.Group, field => {\n  const RadioComp = field.buttonGroup ? Radio.Button : Radio\n  if (field.options && !field.children) {\n    return {\n      ...field,\n      widgetProps: {\n        ...field.widgetProps,\n        name: field.key,\n      },\n      children: mapOptions(field.options).map(opt => (\n        <RadioComp value={opt.value} key={opt.value}>\n          {opt.label}\n        </RadioComp>\n      )),\n    }\n  }\n  return field\n})\n\nFormBuilder.defineWidget('checkbox-group', Checkbox.Group, field => {\n  if (field.options && !field.children) {\n    return {\n      ...field,\n      children: mapOptions(field.options).map(opt => (\n        <Checkbox value={opt.value} key={opt.value}>\n          {opt.label}\n        </Checkbox>\n      )),\n    }\n  }\n  return field\n})\nFormBuilder.defineWidget('select', Select, field => {\n  if (field.options && !field.children) {\n    return {\n      ...field,\n      children: mapOptions(field.options).map(opt => (\n        <Select.Option label={opt.label} value={opt.value} key={opt.value} disabled={opt.disabled}>\n          {opt.children || opt.label}\n        </Select.Option>\n      )),\n    }\n  }\n  return field\n})\n","import FormBuilder from './FormBuilder'\nimport './defineAntdWidgets'\nexport default FormBuilder\n// export default FormBuilder from './FormBuilder'\n"],"names":["QuestionIcon","React","FormItem","Form","Item","isV4","useForm","getValue","obj","namePath","arr","split","current","i","length","has","undefined","getWrappedComponentWithForwardRef","memoize","Comp","forwardRef","props","ref","FormBuilderField","field","meta","form","label","tooltip","Tooltip","formItemLayout","isArray","labelCol","span","wrapperCol","isFieldViewMode","viewMode","readOnly","formItemProps","key","colon","pick","className","name","Object","assign","noStyle","noFormItem","colSpan","Math","round","render","call","initialValue","initialValues","getInitialValue","rules","required","unshift","message","requiredMessage","fieldProps","preserve","viewEle","formValues","getFieldsValue","viewValue","join","renderView","viewWidget","ViewWidget","viewWidgetProps","link","href","linkTarget","options","found","find","opt","capitalize","String","ele","getFieldDecorator","id","wp","widgetProps","disabled","FieldWidget","widget","Input","valueProps","children","ele2","widgetMap","getWidget","Error","normalizeMeta","fields","elements","map","dynamic","item","values","entry","metaConvertor","newField","FormBuilder","getMeta","FormBuilderInner","newMeta","columns","gutter","rows","spanUnit","cols","j","includes","clear","fieldSpan","push","Col","min","Row","defineWidget","useForceUpdate","useState","updateState","forceUpdate","useCallback","f","createForm","ctx","propTypes","PropTypes","any","mapOptions","_","value","isPlainObject","Checkbox","valuePropName","Switch","Button","Password","TextArea","InputNumber","DatePicker","Radio","Group","RadioComp","buttonGroup","Select"],"mappings":"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"}